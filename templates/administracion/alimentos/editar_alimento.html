{% extends 'administracion/base_admin.html' %}

{% block title %}Editar Alimento - Chofys Pet's{% endblock %}

{% block content %}
<div class="form-container">
    <h2 style="color: #ff65a3; margin-bottom: 30px; text-align: center;">Editar Alimento: {{ alimento.nombre }}</h2>
    
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div style="margin-bottom: 30px; text-align: center;">
            {% if alimento.imagen %}
                <img src="{{ alimento.imagen.url }}" alt="{{ alimento.nombre }}" 
                     style="max-width: 300px; max-height: 200px; border-radius: 8px;">
                <p style="margin-top: 10px; color: #666;">Imagen actual</p>
            {% endif %}
        </div>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
            <div class="form-group">
                <label>Nombre del Alimento:</label>
                <input type="text" name="nombre" value="{{ alimento.nombre }}" required>
            </div>
            
            <div class="form-group">
                <label>Precio ($):</label>
                <input type="number" name="precio" value="{{ alimento.precio }}" step="0.01" required>
            </div>
            
            <div class="form-group">
                <label>Tipo de Animal:</label>
                <select name="id_tipo" required>
                    {% for tipo in tipos %}
                    <option value="{{ tipo.id_tipos }}" {% if tipo.id_tipos == alimento.id_tipo.id_tipos %}selected{% endif %}>
                        {{ tipo.nombre }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label>Categoría:</label>
                <select name="id_categoria" required>
                    {% for categoria in categorias %}
                    <option value="{{ categoria.id_categoria }}" {% if categoria.id_categoria == alimento.id_categoria.id_categoria %}selected{% endif %}>
                        {{ categoria.nombre }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label>Gramos (para comida):</label>
                <input type="number" name="gramos" value="{{ alimento.gramos|default:'' }}" step="0.01" placeholder="Dejar vacío si no aplica">
            </div>
            
            <div class="form-group">
                <label>Piezas (para snacks):</label>
                <input type="number" name="piezas" value="{{ alimento.piezas|default:'' }}" placeholder="Dejar vacío si no aplica">
            </div>
            
            <div class="form-group" style="grid-column: span 2;">
                <label>Nueva Imagen (opcional):</label>
                <input type="file" name="imagen" accept="image/*">
                <small style="color: #666;">Dejar vacío para mantener la imagen actual</small>
            </div>
            
            <div class="form-group" style="grid-column: span 2;">
                <label>Contenido / Ingredientes:</label>
                <textarea name="contenido" rows="4" required>{{ alimento.contenido }}</textarea>
            </div>
        </div>
        
        <div style="display: flex; justify-content: center; gap: 20px; margin-top: 30px;">
            <button type="submit" class="btn btn-primary" style="padding: 12px 40px;">Actualizar</button>
            <!-- CORREGIDO: Agregar namespace 'administracion:' -->
            <a href="{% url 'administracion:ver_alimentos' %}" class="btn btn-secondary" style="padding: 12px 40px;">Cancelar</a>
        </div>
    </form>
</div>
{% endblock %}